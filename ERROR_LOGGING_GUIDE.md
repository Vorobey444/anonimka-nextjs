# –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç–ª–æ–≤–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤—Å–µ—Ö JavaScript –æ—à–∏–±–æ–∫ –≤ Telegram –¥–ª—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

## üéØ –ß—Ç–æ –æ—Ç–ª–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

1. **JavaScript –æ—à–∏–±–∫–∏** - –≤—Å–µ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ `window.onerror`
2. **Promise rejection** - –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –ø—Ä–æ–º–∏—Å–æ–≤ —á–µ—Ä–µ–∑ `window.unhandledrejection`
3. **–†—É—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - —á–µ—Ä–µ–∑ `window.logError(message, error)`

## üì± –ß—Ç–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ Telegram

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å:
- ‚è∞ **–í—Ä–µ–º—è** - –∫–æ–≥–¥–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ (–≤—Ä–µ–º—è –ê–ª–º–∞—Ç—ã)
- üì± **–¢–∏–ø** - error / unhandledRejection / manual
- üìç **URL** - –Ω–∞ –∫–∞–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ
- üë§ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** - username –∏ ID (–µ—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)
- ‚ùå **–°–æ–æ–±—â–µ–Ω–∏–µ –æ—à–∏–±–∫–∏** - —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏
- üìö **Stack Trace** - –ø–µ—Ä–≤—ã–µ 5 —Å—Ç—Ä–æ–∫ —Å—Ç–µ–∫–∞ –≤—ã–∑–æ–≤–æ–≤
- üåê **User Agent** - –±—Ä–∞—É–∑–µ—Ä –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (app.js)

```javascript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–ª–æ–≤ –æ—à–∏–±–æ–∫
window.addEventListener('error', (event) => {
    logErrorToServer(event.error, 'error');
});

window.addEventListener('unhandledrejection', (event) => {
    logErrorToServer(event.reason, 'unhandledRejection');
});

// –†—É—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
window.logError('–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã', error);
```

### –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å (API)

**Endpoint:** `POST /api/log-error`

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ø–∞–º–∞:**
- ResizeObserver loop
- Script error
- Extension context invalidated
- Non-Error promise rejection

**Rate limiting:**
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –Ω–∞ 1 –º–∏–Ω—É—Ç—É
- –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –¥—É–±–ª–∏–∫–∞—Ç—ã –æ–¥–Ω–æ–π –æ—à–∏–±–∫–∏

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Vercel)

–î–æ–±–∞–≤—å—Ç–µ –≤ Vercel Environment Variables:

```env
TELEGRAM_BOT_TOKEN=8105244538:AAH... # –í–∞—à –±–æ—Ç —Ç–æ–∫–µ–Ω
ADMIN_CHAT_ID=884253640              # –í–∞—à Telegram ID (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

### 2. –£–∑–Ω–∞—Ç—å —Å–≤–æ–π Telegram ID

–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É [@userinfobot](https://t.me/userinfobot)

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
throw new Error('–¢–µ—Å—Ç–æ–≤–∞—è –æ—à–∏–±–∫–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è');

// –ò–ª–∏
window.logError('–¢–µ—Å—Ç —Ä—É—á–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è', new Error('–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏'));
```

## üìä –ü—Ä–∏–º–µ—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```
üö® –û–®–ò–ë–ö–ê –í –ü–†–ò–õ–û–ñ–ï–ù–ò–ò

‚è∞ –í—Ä–µ–º—è: 23.11.2025, 18:45:30
üì± –¢–∏–ø: error
üìç URL: https://anonimka.kz/webapp

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: @vorobey (ID: 123456789)

‚ùå –°–æ–æ–±—â–µ–Ω–∏–µ:
TypeError: Cannot read property 'style' of null

üìö Stack Trace:
at showScreen (app.js:2185)
at showMainMenu (app.js:2260)
at checkOnboardingStatus (app.js:4087)
at saveLocationAndContinue (app.js:5159)
at onclick (webapp:142)

üåê User Agent:
Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15...
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚ùå –ù–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –ø–∞—Ä–æ–ª–∏ –∏ —Ç–æ–∫–µ–Ω—ã
- ‚úÖ Stack trace –æ–≥—Ä–∞–Ω–∏—á–µ–Ω 800 —Å–∏–º–≤–æ–ª–∞–º–∏
- ‚úÖ User Agent –æ–≥—Ä–∞–Ω–∏—á–µ–Ω 200 —Å–∏–º–≤–æ–ª–∞–º–∏
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (–Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç UI)
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∞–º –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å:
- –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —É—á–∞—Å—Ç–∫–∞—Ö –∫–æ–¥–∞
- –î–∞–Ω–Ω—ã–µ –æ –±—Ä–∞—É–∑–µ—Ä–∞—Ö –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã

## üîç –û—Ç–ª–∞–¥–∫–∞

–ï—Å–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **Telegram –±–æ—Ç** - —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –±–æ—Ç, –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ª–∏
2. **Environment Variables** - —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ TELEGRAM_BOT_TOKEN –≤ Vercel
3. **Chat ID** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–∏ ID –≤ ADMIN_CHAT_ID
4. **–ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞** - –µ—Å—Ç—å –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ `‚úÖ –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞`
5. **Network tab** - –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ª–∏ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ `/api/log-error`

## üìù Changelog

**v1.0** - 23.11.2025
- ‚úÖ –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑
- ‚úÖ –û—Ç–ª–æ–≤ JavaScript –æ—à–∏–±–æ–∫
- ‚úÖ –û—Ç–ª–æ–≤ Promise rejections
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram —Å –¥–µ—Ç–∞–ª—è–º–∏
- ‚úÖ Rate limiting –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ø–∞–º–∞
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
